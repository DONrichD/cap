<html>

<head>
   <title>The jQuery Example</title>
   <script type="text/javascript" src="jquery-3.4.1.min.js"></script>
   <style>
      body {
         background-color: #f2f2f2;
         font-family: Arial, sans-serif;
         margin: 0;
         padding: 20px;
      }

      h1 {
         text-align: center;
         color: #333;
      }

      form {
         margin: 0 auto;
         max-width: 400px;
         background-color: #fff;
         padding: 20px;
         border-radius: 5px;
         box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      table {
         width: 100%;
         border-collapse: collapse;
         margin-top: 20px;
      }

      table td {
         padding: 10px;
         border-bottom: 1px solid #ccc;
      }

      input[type="text"] {
         width: 100%;
         padding: 5px;
         border: 1px solid #ccc;
         border-radius: 3px;
      }

      p {
         margin: 0;
         color: #666;
         font-size: 14px;
      }
   </style>
   <script type="text/javascript">
      $(document).ready(function () {
         //setTimeout(function(){update()}, 5000);
         setInterval(function () { update() }, 5000);
      });

      function update() {
         num1 = Math.floor(Math.random() * 100);

         $.post(
            'get-latest-data.php',
            { api_key: "tPmAT5Ab3j7F9" },
            function (data, stat) {
               jd = JSON.parse(data);
               document.getElementById("Voltage").value = jd.value1;
               document.getElementById("Current").value = jd.value2;
               document.getElementById("Energy").value = jd.value3;
               document.getElementById("PowerFactor").value = jd.value4;
               document.getElementById("created_at").value = jd.readtime;
            }
         );
      }
   </script>
</head>

<body>
   <h1>Data</h1>
   <form id="testform">
      <table>
         <tr>
            <td>
               <p>Voltage:</p>
            </td>
            <td><input type="text" id="Voltage" size="20" readonly /></td>
         </tr>
         <tr>
            <td>
               <p>Current:</p>
            </td>
            <td><input type="text" id="Current" size="20" readonly /></td>
         </tr>
         <tr>
            <td>
               <p>Energy:</p>
            </td>
            <td><input type="text" id="Energy" size="20" readonly /></td>
         </tr>
         <tr>
            <td>
               <p>Power Factor:</p>
            </td>
            <td><input type="text" id="PowerFactor" size="20" readonly /></td>
         </tr>
         <tr>
            <td>
               <p>Time Acquired:</p>
            </td>
            <td><input type="text" id="created_at" size="20" readonly /></td>
         </tr>
      </table>
   </form>
</body>

</html>
